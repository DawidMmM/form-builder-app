!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([,function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(1);function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var i=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=e,this.view=n,n.bindEditItem(this.store.update.bind(this.store)),n.bindRemoveItem(this.removeItem.bind(this)),n.bindAddItem(this.addItem.bind(this)),n.bindClearPropertiesItems(this.clearPropertiesItems.bind(this)),n.showItems(this.store.getData())}var e,n,i;return e=t,(n=[{key:"addItem",value:function(t){void 0===this.index&&(this.index=function(t){return t.map(function(t){return t.id}).reduce(function(t,e){return Math.max(t,e)},0)}(this.store.getData()));var e={};e.id=++this.index,e.parent=void 0!==t?Number(t):-1,e.question="",e.type="",void 0!==t&&(e.conditionType="",e.conditionValue="");var n=this.store.add(e);this.view.showItems(n)}},{key:"removeItem",value:function(t){this.store.remove(t),this.view.removeItem(t)}},{key:"clearPropertiesItems",value:function(t){if(t.length){var e=this.store.clear(t);this.view.showItems(e)}}}])&&o(e.prototype,n),i&&o(e,i),t}();function a(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,o;return e=t,(n=[{key:"itemList",value:function(t,e,n){var o=this;return void 0===n&&(n=document.createElement("div")).classList.add("form-builder"),t.forEach(function(t){var i=document.createElement("div");i.classList.add("form-builder__wrapper"),i.innerHTML='\n\t\t    <div class="fields">\n\t\t        '.concat(-1!==t.parent?'\n\t\t            <div class="fields__group">\n\t\t                <label class="fields__label" for="condition-'.concat(t.id,'">condition</label>\n\t\t                <select class="fields__control" id="condition-').concat(t.id,'" name="conditionType">\n\t\t                    <option value="" ').concat(""!==t.conditionType?"":'selected="true"',' disabled="true">Select your value</option>\n\t\t                    <option ').concat("Equals"===t.conditionType?'selected="true"':"",">Equals</option>\n\t\t                ").concat("number"===e?"\n\t\t                    <option ".concat("Greather than"===t.conditionType?'selected="true"':"",">Greather than</option>\n\t\t                    <option ").concat("Less than"===t.conditionType?'selected="true"':"",">Less than</option>\n\t\t                "):"",'\n\t\t                </select>\n\t\t                    <label class="sr-only" for="value-').concat(t.id,'">value</label>\n\t\t                ').concat("yes/no"===e?'\n\t\t                <select class="fields__control" id="select-'.concat(t.id,'" name="conditionValue">\n\t\t                    <option value="" ').concat(""!==t.conditionValue?"":'selected="true"',' disabled="true">Select your value</option>\n\t\t                    <option ').concat("Yes"===t.conditionValue?'selected="true"':"",">Yes</option>\n\t\t                    <option ").concat("No"===t.conditionValue?'selected="true"':"",">No</option>\n\t\t                </select>\n\t\t                "):'\n\t\t                <input class="fields__control" id="value-'.concat(t.id,'" name="conditionValue" type=').concat("number"===e?"number":"text"," ").concat(""!==t.conditionValue?"value=".concat(t.conditionValue):"",' placeholder="Enter your value"> \n\t\t                '),"\n\t\t            </div>\n\t\t        "):"",'\n\t\t        <div class="fields__group">\n\t\t            <label class="fields__label" for="question-').concat(t.id,'">question</label>\n\t\t            <input class="fields__control" id="question-').concat(t.id,'" name="question" type="text" value="').concat(t.question,'" placeholder="Enter your question">\n\t\t        </div>\n\t\t        <div class="fields__group">\n\t\t            <label class="fields__label" for="type-').concat(t.id,'">type</label>\n\t\t            <select class="fields__control" id="type-').concat(t.id,'" name="type">\n\t\t                <option value="" ').concat(""!==t.type?"":'selected="true"','  disabled="true">Select your value</option>\n\t\t                <option value="text" ').concat("text"===t.type?'selected="true"':"",'>Text</option>\n\t\t                <option value="yes/no" ').concat("yes/no"===t.type?'selected="true"':"",'>Yes/No</option>\n\t\t                <option value="number" ').concat("number"===t.type?'selected="true"':"",'>Number</option>\n\t\t            </select>\n\t\t        </div>\n\t\t        <div class="fields__buttons">\n\t\t            <button class="btn btn_success" type="button" data-parent="').concat(t.id,'">Add Sub-Input</button>\n\t\t            <button class="btn btn_danger" type="button">Delete</button>\n\t\t        </div>\n\t\t    </div>'),t.items&&o.itemList(t.items,t.type,i),n.appendChild(i)}),n}}])&&a(e.prototype,n),o&&a(e,o),t}();function c(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e}var e,n,o;return e=t,(n=[{key:"getData",value:function(){return JSON.parse(localStorage.getItem(this.name)||"[]")}},{key:"setData",value:function(t){localStorage.setItem(this.name,JSON.stringify(t))}},{key:"add",value:function(t){var e=this.getData();return e.push(t),this.setData(e),e}},{key:"remove",value:function(t){var e=this.getData();t.forEach(function(t){var n=e.findIndex(function(e){return e.id===Number(t)});e.splice(n,1)}),this.setData(e)}},{key:"update",value:function(t){var e=this.getData(),n=Number(t.id.replace(/\D/g,"")),o=t.name,i=t.value;e.find(function(t){return t.id===n})[o]=i,this.setData(e)}},{key:"clear",value:function(t){var e=this.getData(),n=0;return e.map(function(e){e.id===Number(t[n])&&(e.conditionType="",e.conditionValue="",n++)}),this.setData(e),e}}])&&c(e.prototype,n),o&&c(e,o),t}(),s=function(t,e){return(e||document).querySelector(t)},l=function(t,e,n,o,i){!function(t,e,n,o){t.addEventListener(e,n,!!o)}(t,n,function(t){t.target.matches(e)&&o(t)},!!i)};function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.template=e,this.nativeContainer=s(".formBuilderApp"),this.container=s("#container",this.nativeContainer)}var e,n,o;return e=t,(n=[{key:"showItems",value:function(t){this.container.innerHTML="",this.container.appendChild(this.template.itemList(function t(e,n){return e.reduce(function(o,i){var a=Object.assign({},i);if(a.parent!==n)return o;var r=t(e,a.id);return r.length&&(a.items=r),o.concat([a])},[])}(t,-1)))}},{key:"removeItem",value:function(t){var e=t.shift(),n=s('[data-parent="'.concat(e,'"]')),o=n.offsetParent,i=o.parentNode;n&&i.removeChild(o)}},{key:"bindClearPropertiesItems",value:function(t){l(this.container,'[name = "type"]',"change",function(e){var n,o,i=e.target;t((n=i.closest(".form-builder__wrapper"),(o=Array.from(n.children)).shift(),o.map(function(t){return t.querySelector(".btn_success").dataset.parent})))})}},{key:"bindAddItem",value:function(t){l(this.nativeContainer,".btn_success","click",function(e){var n=e.target;t(n.dataset.parent)})}},{key:"bindRemoveItem",value:function(t){l(this.container,".btn_danger","click",function(e){var n,o=e.target;t((n=o,Array.from(n.closest(".form-builder__wrapper").querySelectorAll(".btn_success")).map(function(t){return t.dataset.parent})))})}},{key:"bindEditItem",value:function(t){l(this.container,".fields__control","change",function(e){var n=e.target;t(n)})}}])&&d(e.prototype,n),o&&d(e,o),t}();new i(new u("store"),new f(new r))}]);